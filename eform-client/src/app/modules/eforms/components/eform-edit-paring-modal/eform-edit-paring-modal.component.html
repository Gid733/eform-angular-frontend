<div mdbModal class="modal fade" #frame="mdbModal">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h3>{{'eForm Pairing'}}</h3>
      </div>
      <div class="modal-body table-responsive">
        <div class="col-md-12 ng-select-wrapper" *ngIf="foldersDto.length > 0">
          <ng-select
            class="custom"
            dropdownPosition="'bottom'"
            [placeholder]="'Folders' | translate"
            [items]="foldersDto"
            [(ngModel)]="deployModel.folderId"
            (ngModelChange)="updateSaveButtonDisabled($event)"
            [clearable]="false"
            [bindLabel]="'name'"
            [bindValue]="'id'"
            id="folderSelector"
            [multiple]="false"></ng-select>
        </div>
        <table class="table table-xs table-bordered text-center z-depth-1">
          <thead>
          <tr>
            <th>Microting ID</th>
            <th>{{ 'Device user' | translate }}</th>
            <th>{{ 'Check to pair' | translate }}</th>
          </tr>
          </thead>
          <tbody id="pairingModalTableBody">
          <tr *ngFor="let siteDto of sitesDto">
            <td class="align-middle">{{siteDto.siteUId}}</td>
            <td class="align-middle">{{siteDto.siteName}}</td>
            <td class="align-middle">
              <ng-container *ngFor="let checkboxModel of deployViewModel.deployCheckboxes">
                <div class="mat-checkbox" *ngIf="checkboxModel.id == siteDto.siteUId">
                  <input id="checkbox{{checkboxModel.id}}" (change)="addToArray($event, checkboxModel.id)"
                         [checked]="checkboxModel.isChecked" [value]="checkboxModel.isChecked" color="primary" type="checkbox">
                  <label for="checkbox{{checkboxModel.id}}"></label>
                </div>
              </ng-container>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button mdbBtn class="btn-success" (click)="submitDeployment()" [disabled]="saveButtonDisabled">{{'Save'}}</button>
        <button mdbBtn class="btn-accent text-black-50" (click)="frame.hide()">{{'Cancel'}}</button>
      </div>
    </div>
  </div>
</div>

<eform-spinner [spinnerVisibility]="spinnerStatus"></eform-spinner>
